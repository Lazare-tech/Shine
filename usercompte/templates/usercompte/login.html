{% extends "base.html" %}
{% block title %}{% endblock title %}
{% block content %}

{% include 'usercompte/sec.html' %}

<div class="container py-3">
    
    <!-- LOGO -->
  
    <!-- CARD -->
    <div class="shine-card">

        <h3 class="text-center mb-4 text-title-blue" >Connexion à votre Espace</h3>
        <h6 class="text-center mb-4 text-title-blue">Veuillez sélectionner votre profil et vous connecter</h6>
        <!-- CHOIX PROFIL EN HAUT -->
<div class="user-role-box">
    <button class="role-btn" onclick="setRole('Client')">
        <i class="fas fa-user"></i>
        <span>Client</span>
    </button>

    <button class="role-btn" onclick="setRole('Apporteur')">
        <i class="fas fa-briefcase"></i>
        <span>Apporteur d’affaires</span>
    </button>

    <button class="role-btn" onclick="setRole('Mentor')">
        <i class="fas fa-chalkboard-teacher"></i>
        <span>Mentor</span>
    </button>
</div>
        <!------------- FORMULAIRE (TOUJOURS VISIBLE)-->
<form method="POST">
    {% csrf_token %}
    <input type="hidden" name="selected_role" id="selected_role" value="">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-danger small py-2">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <div class="mb-3">
        {{ form.username }}
        {{ form.username.errors }}
    </div>
    
    <div class="mb-2">
        {{ form.password }}
        {{ form.password.errors }}
    </div>

    <div class="d-flex justify-content-between mb-3 small">
        <label><input type="checkbox" name="remember_me"> Se souvenir de moi</label>
        <a href="#" class="text-title-blue fw-bold">Mot de passe oublié ?</a>
    </div>

    <button type="submit" class="btn-shine w-100 text-white py-2">Continuer</button>

    <p class="text-center mt-3 small">
        Vous n'avez pas encore de compte ? 
        <a href="{% url 'usercompte:register' %}" class="text-title-blue fw-bold">Créer un compte</a>
    </p>
</form>
    </div>
</div>

{% comment %} <script>
function setRole(role){
    document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
}
</script> {% endcomment %}

<script>
function setRole(role){
    // Supprime la classe active de tous les boutons
    document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
    
    // Ajoute la classe au bouton cliqué
    event.currentTarget.classList.add('active');
    
    // MET À JOUR LE CHAMP CACHÉ
    document.getElementById('selected_role').value = role;
}
</script>
{% endblock content %}